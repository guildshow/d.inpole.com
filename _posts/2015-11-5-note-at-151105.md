---
layout: post
title: 使GMS支持admob的smart banner
category: 关于GMS
thumb: /images/ca_diary.png
comments: false
---

## android部分
 
修改你的extension下的文件：
> your_project\extensions\GoogleMobileAdsExt\AndroidSource\Java\ and open GoogleMobileAdsExt.java file
 
在如下部分修改代码：
> GoogleMobileAds_AddBannerAt()

原代码
`switch(type)
{
case 1: BannerSize = AdSize.BANNER; break;
case 2: BannerSize = AdSize.MEDIUM_RECTANGLE;break;
case 3: BannerSize = AdSize.FULL_BANNER;break;
case 4: BannerSize = AdSize.LEADERBOARD;break;
case 5: BannerSize = AdSize.WIDE_SKYSCRAPER; break;
default: Log.i("yoyo", "AddBanner illegal banner size type:" + _sizeType); return;
}`

修改为：
`
switch(type)
{
case 1: BannerSize = AdSize.BANNER; break;
case 2: BannerSize = AdSize.MEDIUM_RECTANGLE;break;
case 3: BannerSize = AdSize.FULL_BANNER;break;
case 4: BannerSize = AdSize.LEADERBOARD;break;
case 5: BannerSize = AdSize.WIDE_SKYSCRAPER; break;
case 6: BannerSize = AdSize.SMART_BANNER; break;
default: Log.i("yoyo", "AddBanner illegal banner size type:" + _sizeType); return;
}
`
 
之后在使用smart banner时：

`GoogleMobileAds_AddBanner(YOUR_BANNER_ID, 6);`

## ios部分
在以下位置:
> \extensions\GoogleMobileAdsExt\iOSSource\Source\Admob.mm

增加代码：
`
case 6: bannerSize = kGADAdSizeSmartBannerPortrait; break; 
case 7: bannerSize = kGADAdSizeSmartBannerLandscape; break;
`

其中6为竖置，7为横置；
